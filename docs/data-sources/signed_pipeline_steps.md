---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "buildkite_signed_pipeline_steps Data Source - terraform-provider-buildkite"
subcategory: ""
description: |-
  Use this data source to sign pipeline steps with a JWKS key. You will need to have
  the corresponding verification key present on the agents that run this the steps in
  this pipeline. You can then use these steps in a buildkite_pipeline resource.
  See RFC 7517 https://datatracker.ietf.org/doc/html/rfc7517 for more information
  about the JWKS format.
  See the Buildkite documentation https://buildkite.com/docs/agent/v3/signed_pipelines
  for more info about signed pipelines.
  Note that the PS512 and ES512 signature algorithms are nondeterministic and
  will result in the signature changing on each run. Use EdDSA to avoid drift.
---

# buildkite_signed_pipeline_steps (Data Source)

Use this data source to sign pipeline steps with a JWKS key. You will need to have
the corresponding verification key present on the agents that run this the steps in
this pipeline. You can then use these steps in a `buildkite_pipeline` resource.

See [RFC 7517](https://datatracker.ietf.org/doc/html/rfc7517) for more information
about the JWKS format.

See the Buildkite [documentation](https://buildkite.com/docs/agent/v3/signed_pipelines)
for more info about signed pipelines.

Note that the PS512 and ES512 signature algorithms are nondeterministic and
will result in the signature changing on each run. Use EdDSA to avoid drift.

## Example Usage

```terraform
locals {
  repository = "git@github.com:my-org/my-repo.git"
}

data "buildkite_signed_pipeline_steps" "my-steps" {
  repository  = local.repository
  jwks_file   = "/path/to/my/jwks.json"
  jwks_key_id = "my-key"

  unsigned_steps = <<YAML
steps:
- label: ":pipeline:"
  command: buildkite-agent pipeline upload
YAML
}

resource "buildkite_pipeline" "my-pipeline" {
  name       = "my-pipeline"
  repository = local.repository
  steps      = data.buildkite_signed_pipeline_steps.my-steps.steps
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `repository` (String) The repository that will be checked out in a build of the pipeline.
- `unsigned_steps` (String) The steps to sign in YAML format.

### Optional

- `jwks` (String, Sensitive) The JSON Web Key Set (JWKS) to use for signing.
If `jwks_key_id` is not specified, and the set contains exactly one key, that key will
be used.

~> **Security Notice** The secret key in the `jwks` attribute will be stored
*unencrypted* in your Terraform state file. This attribute is designed for
users that have systems to to securely manage their state files. If you wish
to avoid this, use the `jwks_file` attribute instead.
- `jwks_file` (String) The path to a file containing the JSON Web Key Set (JWKS) to use for
signing. Users will have to ensure that the JWKS file is present on systems
running Terraform. If `jwks` is specified, this will be ignored and the
JWKS will be parsed from that value instead. If `jwks_key_id` is not specified, and the
set contains exactly one key, that key will be used.

~> **Security Notice** The secret key referenced in the `jwks_file` attribute is
expected to be stored *unencrypted* as a file on the system running
Terraform. You are responsible for securing it on this system while
Terraform is running, and cleaning it up after it has finished running.
- `jwks_key_id` (String) The ID of the key in the JSON Web Key Set (JWKS) to use for signing.
If this is not specified, and the key set contains exactly one key, that key
will be used.

### Read-Only

- `steps` (String) The signed steps in YAML format.
