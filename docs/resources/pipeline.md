---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "buildkite_pipeline Resource - terraform-provider-buildkite"
subcategory: ""
description: |-
  This resource allows you to create and manage pipelines for repositories.
  More information on pipelines can be found in the documentation https://buildkite.com/docs/pipelines.
  -> Note: When creating a new pipeline, the Buildkite API requires at least one team to be associated with it. You must use the 'default_team_id' attribute to specify this initial team. The 'buildkite_pipeline_team' resource can then be used to manage team access for existing pipelines.
---

# buildkite_pipeline (Resource)

This resource allows you to create and manage pipelines for repositories.

More information on pipelines can be found in the [documentation](https://buildkite.com/docs/pipelines).

-> **Note:** When creating a new pipeline, the Buildkite API requires at least one team to be associated with it. You must use the 'default_team_id' attribute to specify this initial team. The 'buildkite_pipeline_team' resource can then be used to manage team access for existing pipelines.

## Example Usage

```terraform
# minimal repository
data "buildkite_cluster" "default" {
  name = "Default cluster"
}
resource "buildkite_pipeline" "pipeline" {
  name       = "repo"
  repository = "git@github.com:my-org/my-repo"
  cluster_id = data.buildkite_cluster.default.id
}

# with github provider settings
data "buildkite_cluster" "default" {
  name = "Default cluster"
}
resource "buildkite_pipeline" "pipeline" {
  color      = "#000000"
  emoji      = ":buildkite:"
  name       = "repo"
  repository = "git@github.com:my-org/my-repo"
  cluster_id = data.buildkite_cluster.default.id

  provider_settings = {
    build_branches      = false
    build_tags          = true
    build_pull_requests = false
    trigger_mode        = "code"
  }
}

# signed pipeline
data "buildkite_cluster" "default" {
  name = "Default cluster"
}
locals {
  repository = "git@github.com:my-org/my-repo.git"
}

data "buildkite_signed_pipeline_steps" "signed-steps" {
  repository  = local.repository
  jwks_file   = "/path/to/my/jwks-private.json"
  jwks_key_id = "my-key-id"

  unsigned_steps = <<YAML
steps:
- label: ":pipeline:"
  command: buildkite-agent pipeline upload
YAML
}

resource "buildkite_pipeline" "signed-pipeline" {
  name       = "my-signed-pipeline"
  repository = local.repository
  cluster_id = data.buildkite_cluster.default.id
  steps      = data.buildkite_signed_pipeline_steps.signed-steps.steps
}


# Advanced example using Github provider to create repository webhook for Buildkite pipeline

terraform {
  required_providers {
    github = {
      source  = "integrations/github"
      version = "~> 6.0"
    }
    buildkite = {
      source  = "buildkite/buildkite"
      version = "~> 1.16"
    }
  }
}

provider "github" {}
provider "buildkite" {
  organization = "my-org-slug"
}

resource "github_repository" "test_repo" {
  name        = "example"
  description = "My awesome codebase"

  visibility = "private"
}

data "buildkite_cluster" "default" {
  name = "Default cluster"
}

resource "buildkite_pipeline" "pipeline" {
  name       = "repo"
  repository = github_repository.test_repo.ssh_clone_url
  cluster_id = data.buildkite_cluster.default.id
  depends_on = [github_repository.test_repo]
}

resource "github_repository_webhook" "my_webhook" {
  repository = github_repository.test_repo.name

  configuration {
    url          = buildkite_pipeline.pipeline.webhook_url
    content_type = "application/json"
    insecure_ssl = false
  }

  events = ["deployment", "pull_request", "push"]

  depends_on = [buildkite_pipeline.pipeline]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name to give the pipeline.
- `repository` (String) URL to the repository this pipeline is configured for.

### Optional

- `allow_rebuilds` (Boolean) Whether rebuilds are allowed for this pipeline.
- `branch_configuration` (String) Configure the pipeline to only build on this branch conditional.
- `cancel_intermediate_builds` (Boolean) Whether to cancel builds when a new commit is pushed to a matching branch.
- `cancel_intermediate_builds_branch_filter` (String) Filter the `cancel_intermediate_builds` setting based on this branch condition.
- `cluster_id` (String) Attach this pipeline to the given cluster GraphQL ID.
- `color` (String) A color hex code to represent this pipeline.
- `default_branch` (String) Default branch of the pipeline.
- `default_team_id` (String) The GraphQL ID of a team to initially assign to the pipeline. This is required by the Buildkite API when creating a new pipeline. The team assigned here will be given 'Manage Build and Read' access. Further team associations can be managed with the `buildkite_pipeline_team` resource after the pipeline is created.
- `default_timeout_in_minutes` (Number) Set pipeline wide timeout for command steps.
- `description` (String) Description for the pipeline. Can include emoji ðŸ™Œ.
- `emoji` (String) An emoji that represents this pipeline.
- `maximum_timeout_in_minutes` (Number) Set pipeline wide maximum timeout for command steps.
- `pipeline_template_id` (String) The GraphQL ID of the pipeline template applied to this pipeline.
- `provider_settings` (Attributes) Control settings depending on the VCS provider used in `repository`. (see [below for nested schema](#nestedatt--provider_settings))
- `skip_intermediate_builds` (Boolean) Whether to skip queued builds if a new commit is pushed to a matching branch.
- `skip_intermediate_builds_branch_filter` (String) Filter the `skip_intermediate_builds` setting based on this branch condition.
- `slug` (String) A custom identifier for the pipeline. If provided, this slug will be used as the pipeline's URL path instead of automatically converting the pipeline name. If not provided, the slug will be [derived](https://buildkite.com/docs/apis/graphql/cookbooks/pipelines#create-a-pipeline-deriving-a-pipeline-slug-from-the-pipelines-name) from the pipeline `name`.
- `steps` (String) The YAML steps to configure for the pipeline. Can also accept the `steps` attribute from the [`buildkite_signed_pipeline_steps`](/docs/data-sources/signed_pipeline_steps) data source to enable a signed pipeline. Defaults to `buildkite-agent pipeline upload`.
- `tags` (Set of String) Tags to attribute to the pipeline. Useful for searching by in the UI.

### Read-Only

- `badge_url` (String) The badge URL showing build state.
- `cluster_name` (String) The name of the cluster the pipeline is (optionally) attached to.
- `id` (String) The GraphQL ID of the pipeline.
- `uuid` (String) The UUID of the pipeline.
- `webhook_url` (String) The webhook URL used to trigger builds from VCS providers.

<a id="nestedatt--provider_settings"></a>
### Nested Schema for `provider_settings`

Optional:

- `build_branches` (Boolean) Whether to create builds when branches are pushed.
- `build_pull_request_forks` (Boolean) Whether to create builds for pull requests from third-party forks.
- `build_pull_request_labels_changed` (Boolean) Whether to create builds for pull requests when labels are added or removed.
- `build_pull_request_ready_for_review` (Boolean) Whether to create a build when a pull request changes to "Ready for review".
- `build_pull_requests` (Boolean) Whether to create builds for commits that are part of a pull request.
- `build_tags` (Boolean) Whether to create builds when tags are pushed.
- `cancel_deleted_branch_builds` (Boolean) Automatically cancel running builds for a branch if the branch is deleted.
- `filter_condition` (String) The condition to evaluate when deciding if a build should run. This is only valid when `trigger_mode` is `code`. More details available in [the documentation](https://buildkite.com/docs/pipelines/conditionals#conditionals-in-pipelines).
- `filter_enabled` (Boolean) Whether to filter builds to only run when the condition in `filter_condition` is true.
- `ignore_default_branch_pull_requests` (Boolean) Whether to prevent caching pull requests with the source branch matching the default branch.
- `prefix_pull_request_fork_branch_names` (Boolean) Prefix branch names for third-party fork builds to ensure they don't trigger branch conditions. For example, the main branch from some-user will become some-user:main.
- `publish_blocked_as_pending` (Boolean) The status to use for blocked builds. Pending can be used with [required status checks](https://help.github.com/en/articles/enabling-required-status-checks) to prevent merging pull requests with blocked builds.
- `publish_commit_status` (Boolean) Whether to update the status of commits in Bitbucket, GitHub, or GitLab.
- `publish_commit_status_per_step` (Boolean) Whether to create a separate status for each job in a build, allowing you to see the status of each job directly in Bitbucket or GitHub.
- `pull_request_branch_filter_configuration` (String) Filter pull requests builds by the branch filter.
- `pull_request_branch_filter_enabled` (Boolean) Filter pull request builds.
- `separate_pull_request_statuses` (Boolean) Whether to create a separate status for pull request builds, allowing you to require a passing pull request build in your [required status checks](https://help.github.com/en/articles/enabling-required-status-checks) in GitHub.
- `skip_builds_for_existing_commits` (Boolean) Whether to skip creating a new build if an existing build for the commit and branch already exists. This option is only valid if the pipeline uses a GitHub repository.
- `skip_pull_request_builds_for_existing_commits` (Boolean) Whether to skip creating a new build for a pull request if an existing build for the commit and branch already exists.
- `trigger_mode` (String) What type of event to trigger builds on. Must be one of:
	- `code` will create builds when code is pushed to GitHub.
	- `deployment` will create builds when a deployment is created in GitHub.
	- `fork` will create builds when the GitHub repository is forked.
	- `none` will not create any builds based on GitHub activity.

	-> `trigger_mode` is only valid if the pipeline uses a GitHub repository.
	-> If not set, the default value is `code` and other provider settings defaults are applied.

## Import

Using `terraform import`, import resources using the `id`. For example:
```shell
# import a pipeline resource using the pipelines GraphQL ID
# GraphQL ID for a pipeline can be found on its settings page
terraform import buildkite_pipeline.pipeline UGlwZWxpbmUtLS00MzVjYWQ1OC1lODFkLTQ1YWYtODYzNy1iMWNmODA3MDIzOGQ=
```

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import instances using the `id`. For example:
```terraform
import {
  to = buildkite_pipeline.pipeline
  id = "UGlwZWxpbmUtLS00MzVjYWQ1OC1lODFkLTQ1YWYtODYzNy1iMWNmODA3MDIzOGQ="
}
```
