---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "buildkite_cluster_secret Resource - terraform-provider-buildkite"
subcategory: ""
description: |-
  A Cluster Secret is an encrypted secret that can be used by pipelines running on a specific cluster in Buildkite.
---

# buildkite_cluster_secret (Resource)

A Cluster Secret is an encrypted secret that can be used by pipelines running on a specific cluster in Buildkite.

## Example Usage

```terraform
# create a cluster
resource "buildkite_cluster" "primary" {
  name        = "Primary cluster"
  description = "Runs the monolith build and deploy"
  emoji       = "ðŸš€"
  color       = "#bada55"
}

# create a basic secret for the cluster
resource "buildkite_cluster_secret" "api_key" {
  cluster_id  = buildkite_cluster.primary.id
  key         = "API_KEY"
  value       = var.api_key
  description = "API key for external service"
}

# create a secret with a policy that restricts access
resource "buildkite_cluster_secret" "deploy_key" {
  cluster_id  = buildkite_cluster.primary.id
  key         = "DEPLOY_SSH_KEY"
  value       = var.deploy_ssh_key
  description = "SSH key for deployments"
  policy      = <<-EOT
    - pipeline_slug: deploy-pipeline
      build_branch: main
  EOT
}

# use a pipeline that can access the secrets
resource "buildkite_pipeline" "monolith" {
  name       = "Monolith"
  repository = "https://github.com/..."
  cluster_id = buildkite_cluster.primary.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String) The GraphQL ID of the Cluster that this secret belongs to.
- `key` (String) The key name for the secret. Must start with a letter and contain only letters, numbers, and underscores. Cannot start with `BUILDKITE`.
- `value` (String, Sensitive) The secret value to encrypt and store.

### Optional

- `description` (String) A description of what this secret is used for.
- `policy` (String) A YAML policy defining access rules for the secret. See [Buildkite documentation](https://buildkite.com/docs/pipelines/cluster-secrets) for the policy format.

### Read-Only

- `cluster_uuid` (String) The UUID of the Cluster that this secret belongs to.
- `id` (String) The GraphQL ID of the secret.
- `uuid` (String) The UUID of the secret.
